meta {
  name: Run for next action
  type: http
  seq: 1
}

get {
  url: {{baseUrl}}/api/persons/{{personId}}/lending-applications/{{lendingApplicationId}}
  body: none
  auth: inherit
}

headers {
  Accept: application/json
}

script:post-response {
  let json = res.getBody();
  if (json.actionContext && json.actionContext.actions.length > 0){
    console.log("Action type: "+json.actionContext.actions[0].actionType)
    bru.setVar("actionId", json.actionContext.actions[0].actionId);
  }
}

docs {
  Fetch the details of a lending application, including the status of the application and a list of actions that the customer needs to complete in order for the application to progress.
  
  :::warning
  
   This endpoint is not yet implemented and subject to change.
  
  :::
  
}
