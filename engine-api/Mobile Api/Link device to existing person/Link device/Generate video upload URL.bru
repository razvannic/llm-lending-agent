meta {
  name: Generate video upload URL
  type: http
  seq: 4
}

post {
  url: {{baseUrl}}/api/documents/upload-url
  body: json
  auth: inherit
}

headers {
  Content-Type: application/json
  Accept: application/json
}

body:json {
  {
    "contentMd5": "1B2M2Y8AsgTpgAmY7PhCfg==",
    "deviceId": "{{deviceId}}",
    "mimeType": "video/mp4",
    "action": "ACCOUNT_ACCESS"
  }
}

script:post-response {
  let responseData = res.getBody();
  bru.setVar("presignedUrl", responseData.presignedUrl);
  bru.setVar("videoDocumentId", responseData.documentId);
}

docs {
  Generate a presigned URL to upload an image or video, such as an identity verification video.<br><br>In the request body, specify the `action` that the request relates to, for example `PASSWORD_RESET`. You also need to provide an MD5 hash of the document.
}
