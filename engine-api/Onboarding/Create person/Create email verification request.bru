meta {
  name: Create email verification request
  type: http
  seq: 10
}

post {
  url: {{baseUrl}}/api/persons/{{personId}}/emails/{{emailAddressId}}/verify
  body: json
  auth: inherit
}

headers {
  Accept: application/json
}

body:json {
   {
      "smsConsent": false,
      "emailConsent": false,
      "notificationConsent": true
    }
}

script:post-response {
  let responseData = res.getBody();
  bru.setVar("emailVerificationId", responseData.code);
}

docs {
  Create an email address verification request for a person. Returns an email verification code, which is required for validating a person's email address.<br><br>Engine does not send an email to the customer containing the code - you must implement this. For more information, see [Email verification](/docs/onboarding/email-verification/).
}
